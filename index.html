<!DOCTYPE html>
<html lang="pl">

  <head>
    <meta charset="UTF-8">
    <title>Animowany tekst</title>
  
<style>
@font-face {
    font-family: "Pacifico", cursive;
  font-weight: 400;
  font-style: normal;
  src: url("https://fonts.googleapis.com/css2?family=Pacifico&display=swap") format("woff2-variations");
  font-display: block;
  font-style: normal italic;
  font-weight: 100 900;
  font-stretch: 10% 400%;
}
:root {
  --fontSize: 42px;
}

html {
  box-sizing: border-box;
}

*,
*:before,
*:after {
  box-sizing: inherit;
}

body,
html {
  height: 100%;
  width: 100%;
  margin: 0;
  padding: 0;
}

body {
  background: transparent;
   font-family: "Pacifico", cursive;
  font-weight: 400;
  font-style: normal;
  color: crimson;
  overflow: hidden;
  
}

.container {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  perspective: 900px;
  visibility: hidden;
  opacity: 0;
}

.container__inner {
  transform-style: preserve-3d;
}

.wheel {
  position: relative;
  width: 100%;
  min-width: 800px;
  height: 100%;
  transform-style: preserve-3d;
}

.txt {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(0%, -50%);
  margin: 0;
  font-size: var(--fontSize);
  font-weight: 900;
  font-stretch: 50%;
  text-transform: uppercase;
  -webkit-backface-visibility: hidden;
          backface-visibility: hidden;
  transform-style: preserve-3d;
  line-height: 1;
  white-space: nowrap;
}

.char {
  transform-style: preserve-3d;
}

.gsap-3-logo {
  width: 20vw;
  max-width: 150px;
  position: fixed;
  bottom: 15px;
  right: 15px;
}


</style>

  </head>
    
  <body>
  <div class="container">
	<div class="container__inner">
		<div class="wheel">
			<p class="txt">SP  M i Å‚ o w i c e</p>
		</div>
	</div>
</div>

<!---939680--->
<script src='https://cdnjs.cloudflare.com/ajax/libs/gsap/3.0.0/gsap.min.js'></script>
<script src='https://s3-us-west-2.amazonaws.com/s.cdpn.io/939680/SplitText.min.js'></script>

<script>
console.clear();

gsap.registerPlugin(SplitText);

select = e => document.querySelector(e);

let fontSize = gsap.getProperty(':root', '--fontSize');
let txt = select('.txt');
let wheel = select('.wheel');
let numLines = 5;
let radius = (fontSize/2)/Math.sin((180/numLines)*(Math.PI/180)); // from Pythagoras Eq
let angle = 360/numLines;
let origin = `0% 50% -${radius*2}px`;
let mySplitText = new SplitText(txt, {type:"chars", charsClass:"char", position: "relative" }); 

function cloneTxt() {
	for (i=0; i<numLines-1; i++) {
		var clone = txt.cloneNode(true);
		wheel.appendChild(clone);
	}
}

function positionTxt() {
	gsap.set('.container__inner', {
		rotation: 65,
		rotationX: 0,
		rotationY: 20,
		y: -150
	});
	gsap.set('.txt', {
		rotationX: function(index) {
			return angle*index;
		},
		z: radius*2,
		transformOrigin: origin
	});
	gsap.set('.char', {
		rotateX: -90,
		transformOrigin: "50% 50%"
	});
}

cloneTxt();
positionTxt();

gsap.set('.container', { autoAlpha: 1 });

let charEase = "power4.inOut";
let gtl = gsap.timeline();

function pulse() {
	tl = gsap.timeline( {
		defaults: {
			ease: 'none',
			z: 80,
			ease: 'sine.inOut',
			
			stagger: {
				each: 0.06,
				yoyo: true,
				repeat: -1
			},
			duration: 0.5
		}
	});
	for(i=0; i<numLines; i++) {
		tl.to(`.txt:nth-of-type(${i+1}) .char`, {}, 0)
		tl.to(`.txt:nth-of-type(${i+1})`, {
			fontWeight: 100,
			fontStretch: '400%'
		}, 0)
	}
	return tl;
}

gtl.add(pulse());

gsap.to(wheel, {
	rotationX: -360,
	transformOrigin: "50% 50%",
	repeat: -1,
	ease: 'none',
	duration: 8
});
</script>

  </body>
  
</html>
